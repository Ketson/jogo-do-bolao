<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8"/>
        <title>Jogo do Bolão</title>
        <style>
            canvas{
                position: absolute;
                top: 0px;
                bottom: 0px;
                left: 0px;
                right: 0px;
                margin: auto;
            }
        </style>
    </head>

    <body>
        <script>
            //variáveis do jogo
            var canvas, ctx, ALTURA, LARGURA, frames = 0, maxPulos = 3,

            chao = {
                y: 550,
                altura: 50,
                cor: "#ffdf70",

                desenha: function() {
                    ctx.fillStyle = this.cor;
                    ctx.fillRect(0, this.y, LARGURA, this.altura);
                }
            },

            bloco = {
                x: 50,
                y: 0,
                altura: 50,
                largura: 50,
                cor: "#ff4e4e",
                gravidade: 2.5,
                velocidade: 0,
                forcaDoPulo: 25,
                qtdPulos: 0,

                atualiza: function() {
                    this.velocidade += this.gravidade;
                    this.y += this.velocidade;

                    if(this.y > chao.y - this.altura){
                        this.y = chao.y - this.altura;
                        this.qtdPulos = 0;
                    }
                },

                pula: function() {
                    if(this.qtdPulos < maxPulos){
                        this.velocidade = -this.forcaDoPulo;
                        this.qtdPulos++;
                    }
                },

                desenha: function() {
                    ctx.fillStyle = this.cor;
                    ctx.fillRect(this.x, this.y, this. largura, this.altura);
                }
            };


            function clique(event) {
                bloco.pula();
            }


            //função principal
            function main() {
                //devolve altura da janela do usuario
                ALTURA = window.innerHeight;
                //devolve largura da janela do usuario
                LARGURA = window.innerWidth;

                //se a janela tiver 500, atribui 600
                if(LARGURA >= 500){
                    LARGURA = 600;
                    ALTURA = 600;
                }

                //criando elemento canvas
                canvas = document.createElement("canvas");
                canvas.width = LARGURA;
                canvas.height = ALTURA;
                canvas.style.border = "1px solid #000";

                //definir ctx
                ctx = canvas.getContext("2d");
                //adicionando canvas no corpo do HTML
                document.body.appendChild(canvas);
                //verificar se o usuario clicou
                document.addEventListener("mousedown", clique);

                roda();
            }

            function roda() {
                atualiza();
                desenha();

                //chama a função roda, e desenha
                window.requestAnimationFrame(roda);
            }


            //atualiza obstaculos/status
            function atualiza() {
                frames++;

                bloco.atualiza();
            }

            //desenha depois de atualizar
            function desenha() {
                ctx.fillStyle = "#50beff";
                //pinta fundo
                ctx.fillRect(0, 0, LARGURA, ALTURA);

                chao.desenha();
                bloco.desenha();
            }

            //inicializa o jogo
            main();
            
        </script>
    </body>
</html>